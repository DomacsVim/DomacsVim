name: Formatting

on: push

env:
  BRANCH_NAME: ${{ github.head_ref }}
  TOKEN: ${{ secrets.GH_TOKEN }}

jobs:
  stylua:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: JohnnyMorganz/stylua-action@v4.0.0
        with:
          token: ${{ secrets.GITHUB_TOKEN }}
          version: latest # NOTE: we recommend pinning to a specific version in case of formatting changes
          # CLI arguments
          args: -f .stylua -v .

      - name: Create pull request
        id: open-pr
        uses: repo-sync/pull-request@v2
        with:
          destination_branch: "main"
          pr_title: "chore(*stylua*): Formatting with stylua."
          pr_reviewer: "paigen11"
